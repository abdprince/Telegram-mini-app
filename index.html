<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Ø§Ù„Ù†Ø§Ù Ø¨Ø§Ø± -->
    <nav class="navbar">
        <div class="nav-brand">ØªØ·Ø¨ÙŠÙ‚ÙŠ</div>
        <div class="nav-user">
            <div class="avatar-circle" id="navAvatar" onclick="openProfile()">
                <span id="navInitial">ğŸ‘¤</span>
                <img id="navImg" src="" alt="" style="display: none;">
            </div>
        </div>
    </nav>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <main class="main-content">
        <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ</h1>
        <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ØµÙˆØ±ØªÙƒ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰</p>
    </main>

    <!-- ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ -->
    <div id="profileOverlay" class="overlay" onclick="closeProfileOutside(event)">
        <div class="profile-box" onclick="event.stopPropagation()">
            <div class="profile-avatar">
                <span id="profileInitial">ğŸ‘¤</span>
                <img id="profileImg" src="" alt="" style="display: none;">
            </div>
            
            <div class="user-data">
                <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> <span id="userName">-</span></p>
               <p><strong>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</strong> <span id="userUsername">-</span></p>

                <!--Ø²Ø± Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø±Ù -->
             <p onclick="copyId()" style="cursor: pointer;">
              <strong>Ø§Ù„Ù…Ø¹Ø±Ù:</strong> <span id="userId">-</span> ğŸ“‹</p>
                  <p><strong>Ø§Ù„Ù„ØºØ©:</strong> <span id="userLanguage">-</span></p>
            </div>
            
            <button class="close-btn" onclick="closeProfile()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <!-- JavaScript Ù…Ø¨Ø§Ø´Ø± ÙÙŠ HTML (Ù…Ø¶Ù…ÙˆÙ† 100%) -->
    <script>
        // ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… =====
        let userData = null;

        // ===== Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© =====
        window.onload = function() {
            console.log('âœ… Ø§Ù„ØµÙØ­Ø© Ù…Ø­Ù…Ù„Ø©');
            
            // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„ØºØ±Ø§Ù…
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                tg.expand();
                
                userData = tg.initDataUnsafe?.user;
                console.log('Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', userData);
                
                if (userData) {
                    updateProfile(userData);
                }
            } else {
                console.log('âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Telegram WebApp');
            }
        };

        // ===== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =====
        function updateProfile(user) {
            const name = user.first_name + ' ' + (user.last_name || '');
            const initial = user.first_name.charAt(0).toUpperCase();
// Ø£Ø¶Ù ÙÙŠ Ø¯Ø§Ù„Ø© updateProfile Ù„Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø±Ù
function copyId() {
    if (userData) {
        navigator.clipboard.writeText(userData.id);
        alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø±Ù!');
    }
}
            
            // Ø§Ù„Ù†Ø§Ù Ø¨Ø§Ø±
            document.getElementById('navInitial').textContent = initial;
            if (user.photo_url) {
                document.getElementById('navImg').src = user.photo_url;
                document.getElementById('navImg').style.display = 'block';
                document.getElementById('navInitial').style.display = 'none';
            }
            
            // Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©
            document.getElementById('profileInitial').textContent = initial;
            if (user.photo_url) {
                document.getElementById('profileImg').src = user.photo_url;
                document.getElementById('profileImg').style.display = 'block';
                document.getElementById('profileInitial').style.display = 'none';
            }
            
            // Ø§Ù„Ù†ØµÙˆØµ
            document.getElementById('userName').textContent = name;
            document.getElementById('userUsername').textContent = user.username ? '@' + user.username : 'ØºÙŠØ± Ù…ØªÙˆÙØ±';
            document.getElementById('userId').textContent = user.id;
            document.getElementById('userLanguage').textContent = user.language_code || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        }

        // ===== ÙØªØ­ Ø§Ù„ØµÙØ­Ø© =====
        function openProfile() {
            console.log('ğŸ–±ï¸ ØªÙ… Ø§Ù„Ù†Ù‚Ø±!');
            document.getElementById('profileOverlay').style.display = 'flex';
        }

        // ===== Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø© =====
        function closeProfile() {
            document.getElementById('profileOverlay').style.display = 'none';
        }

        // ===== Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ =====
        function closeProfileOutside(event) {
            if (event.target.id === 'profileOverlay') {
                closeProfile();
            }
        }
    </script>
</body>
</html>
